import{x as w,d as E,b as _,e as O,X as j,bk as $,bt as A,E as F,ac as J,r as v,o as k,bu as U,a4 as Y,bv as B,a6 as y,G as S}from"./kSsZQJMu.js";class d extends Error{constructor(r){super(r),this.message=r,Object.setPrototypeOf(this,d.prototype)}}const P=E({props:{schema:{type:[Object,Function],default:void 0},state:{type:Object,required:!0},validate:{type:Function,default:()=>[]},validateOn:{type:Array,default:()=>["blur","input","change","submit"]}},emits:["submit","error"],setup(e,{expose:r,emit:n}){const l=J(),o=U(`form-${l}`),u=v(null);k(()=>{o.on(async a=>{var s;a.type!=="submit"&&((s=e.validateOn)!=null&&s.includes(a.type))&&await m(a.path,{silent:!0})})}),Y(()=>{o.reset()});const t=v([]);y("form-errors",t),y("form-events",o);const h=v({});y("form-inputs",h);async function b(){let a=await e.validate(e.state);if(e.schema){const{errors:s,result:i}=await V(e.state,e.schema);s?a=a.concat(s):u.value=i}return a}async function m(a,s={silent:!1}){let i=a;if(a&&!Array.isArray(a)&&(i=[a]),i){const f=t.value.filter(c=>!i.includes(c.path)),p=(await b()).filter(c=>i.includes(c.path));t.value=f.concat(p)}else t.value=await b();if(t.value.length>0){if(s.silent)return!1;throw new d(`Form validation failed: ${JSON.stringify(t.value,null,2)}`)}return e.state}async function g(a){var i;const s=a;try{(i=e.validateOn)!=null&&i.includes("submit")&&await m(),s.data=e.schema?u.value:e.state,n("submit",s)}catch(f){if(!(f instanceof d))throw f;const p={...s,errors:t.value.map(c=>({...c,id:h.value[c.path]}))};n("error",p)}}return r({validate:m,errors:t,setErrors(a,s){s?t.value=t.value.filter(i=>i.path!==s).concat(a):t.value=a},async submit(){await g(new Event("submit"))},getErrors(a){return a?t.value.filter(s=>s.path===a):t.value},clear(a){a?t.value=t.value.filter(s=>s.path!==a):t.value=[]}}),{onSubmit:g,errors:B(t)}}});function x(e){return e.validate&&e.__isYupSchema__}function I(e){return e.inner!==void 0}function M(e){return"schema"in e&&typeof e.coercer=="function"&&typeof e.validator=="function"&&typeof e.refiner=="function"}function R(e){return e.validateAsync!==void 0&&e.id!==void 0}function q(e){return e.isJoi===!0}function z(e){return"~standard"in e}async function C(e,r){const n=await r["~standard"].validate(e);return!n.issues||n.issues.length===0?{errors:null,result:"value"in n?n.value:null}:{errors:n.issues.map(o=>{var u;return{path:((u=o.path)==null?void 0:u.map(t=>typeof t=="object"?t.key:t).join("."))||"",message:o.message}}),result:null}}async function G(e,r){try{return{errors:null,result:await r.validateAsync(e,{abortEarly:!1})}}catch(n){if(q(n))return{errors:n.details.map(o=>({path:o.path.join("."),message:o.message})),result:null};throw n}}async function L(e,r){const[n,l]=r.validate(e);return n?{errors:n.failures().map(u=>({message:u.message,path:u.path.join(".")})),result:null}:{errors:null,result:l}}async function N(e,r){try{return{errors:null,result:await r.validate(e,{abortEarly:!1})}}catch(n){if(I(n))return{errors:n.inner.map(o=>({path:o.path??"",message:o.message})),result:null};throw n}}function V(e,r){if(z(r))return C(e,r);if(R(r))return G(e,r);if(x(r))return N(e,r);if(M(r))return L(e,r);throw new Error("Form validation failed: Unsupported form schema")}function X(e,r,n,l,o,u){return O(),_("form",{onSubmit:r[0]||(r[0]=F((...t)=>e.onSubmit&&e.onSubmit(...t),["prevent"]))},[j(e.$slots,"default",$(A({errors:e.errors})))],32)}const H=Object.assign(w(P,[["render",X]]),{__name:"UForm"}),K=S("/images/homelogin.png"),Q=S("/logo.png");export{K as _,Q as a,H as b};
