import{d as Z,b as I,e as $,C as H,K as Q,r as n,L as R,f as a,k as t,h as B,l as i,_ as Y,t as O,j as p,p as f,I as X,y as ee,s as C,T as D,M as te}from"./kSsZQJMu.js";import{_ as se}from"./CNIMkHqb.js";import{_ as ae}from"./DLmCINPn.js";import{_ as re}from"./CGG10qcL.js";import{a as le,b as oe,_ as ie}from"./12BGX6HN.js";import{u as ne}from"./fyQGS7Pw.js";import"./CC2CiqX2.js";const de="https://challenges.cloudflare.com/turnstile/v0/api.js",L="cfTurnstileOnLoad";let T=typeof window<"u"&&window.turnstile!==void 0?"ready":"unloaded",P;const ue=Z({name:"VueTurnstile",emits:["update:modelValue","error","unsupported","expired","before-interactive","after-interactive"],props:{siteKey:{type:String,required:!0},modelValue:{type:String,required:!0},resetInterval:{type:Number,required:!1,default:295*1e3},size:{type:String,required:!1,default:"normal"},theme:{type:String,required:!1,default:"auto"},language:{type:String,required:!1,default:"auto"},action:{type:String,required:!1,default:""},appearance:{type:String,required:!1,default:"always"},renderOnMount:{type:Boolean,required:!1,default:!0}},data(){return{resetTimeout:void 0,widgetId:void 0}},computed:{turnstileOptions(){return{sitekey:this.siteKey,theme:this.theme,language:this.language,size:this.size,callback:this.callback,action:this.action,appearance:this.appearance,"error-callback":this.errorCallback,"expired-callback":this.expiredCallback,"unsupported-callback":this.unsupportedCallback,"before-interactive-callback":this.beforeInteractiveCallback,"after-interactive-callback":this.afterInteractivecallback}}},methods:{afterInteractivecallback(){this.$emit("after-interactive")},beforeInteractiveCallback(){this.$emit("before-interactive")},expiredCallback(){this.$emit("expired")},unsupportedCallback(){this.$emit("unsupported")},errorCallback(d){this.$emit("error",d)},callback(d){this.$emit("update:modelValue",d),this.startResetTimeout()},reset(){window.turnstile&&(this.$emit("update:modelValue",""),window.turnstile.reset())},remove(){this.widgetId&&(window.turnstile.remove(this.widgetId),this.widgetId=void 0)},render(){this.widgetId=window.turnstile.render(this.$refs.turnstile,this.turnstileOptions)},startResetTimeout(){this.resetTimeout=setTimeout(()=>{this.reset()},this.resetInterval)}},async mounted(){const d=new Promise((u,l)=>{P={resolve:u,reject:l},T==="ready"&&u(void 0)});window[L]=()=>{P.resolve(),T="ready"},await(()=>{if(T==="unloaded"){T="loading";const u=`${de}?onload=${L}&render=explicit`,l=document.createElement("script");l.src=u,l.async=!0,l.addEventListener("error",()=>{P.reject("Failed to load Turnstile.")}),document.head.appendChild(l)}return d})(),this.renderOnMount&&this.render()},beforeUnmount(){this.remove(),clearTimeout(this.resetTimeout)}}),me=(d,u)=>{const l=d.__vccOpts||d;for(const[_,x]of u)l[_]=x;return l},ce={ref:"turnstile"};function pe(d,u,l,_,x,h){return $(),I("div",ce,null,512)}const fe=me(ue,[["render",pe]]),we=window.setInterval,ve={class:"grid grid-cols-1 md:grid-cols-2 h-screen"},xe={class:"flex flex-col items-center justify-center p-8 bg-white"},ge={key:0,class:"max-w-md text-title w-full text-base"},_e={class:"relative mt-2 w-full max-w-md text-red-500 text-xs"},he={key:1,class:"max-w-md text-title w-full text-base"},be={class:"text-title w-full max-w-md mt-2 p-2 block text-center"},ye={class:"hidden sm:flex bg-gradient-to-br from-[#00B2E3] to-[#0074C8] flex flex-col items-center justify-center text-white p-10"},ke={class:"mt-6 space-y-3 text-base"},Ve={class:"flex items-center gap-2"},Ce={class:"flex items-center gap-2"},Te={class:"flex items-center gap-2"},Ue={__name:"forgetpassword",setup(d){const{sendrepassword:u,updatepassword:l}=ne(),{$showLoading:_,$hideLoading:x}=H();Q();const h=n(1),o=R({fullName:"",email:"",emailcode:"",password:"",repassword:"",numberAreaCode:"+1",phoneNumber:"",isChecked:!1}),r=R({fullName:"",email:"",emailcode:"",password:"",repassword:"",phone:"",agreement:""}),b=n(!1),j=/^(?!.*\s)(?=.*[0-9])(?=.*[A-Za-z])(?=.*[!@#$%^&*._-])[A-Za-z0-9!@#$%^&*._-]{6,20}$/,E=()=>{b.value=!b.value},g=n("");n(""),n(""),n("");const w=n(""),A=n("");n("");const v=n(0);let S=null;const q=n(null),M=s=>{console.log("onVerify triggered",s),s?(w.value=s,console.log("Turnstile token:",w.value)):console.error("No token received from Turnstile.")},F=s=>{const e=s.trim();e?j.test(e)?r.password="":r.password="Password must be 6-20 characters and include numbers, letters, and special symbols (no spaces)":r.password="Password is required",U(o.repassword)},U=s=>{const e=s.trim();e?o.password.trim()&&o.password.trim()!==e?r.repassword="Passwords do not match":r.repassword="":r.repassword="Please confirm your password"},G=s=>{const e=[];return s.emailcode?r.email="":(r.emailcode="verificaiton code is required",e.push({path:"emailcode",message:r.emailcode})),r.password&&e.push({path:"password",message:r.password}),r.repassword&&e.push({path:"repassword",message:r.repassword}),e},z=async()=>{if(!g.value){A.value="Please enter your email address.";return}if(!w.value){A.value="Please complete the CAPTCHA.";return}try{_();let s=await u(g.value,w.value);x(),C.success("We have sent the email verification code to your email ！"),h.value=2,v.value=60,S=we(()=>{v.value>0?v.value--:clearInterval(S)},1e3)}catch(s){x(),D(()=>{var c;(c=q.value)==null||c.reset()});let e=JSON.parse(s.message);C.error(e.enDesc||"failed, please try again"),console.log(w.value)}},K=async()=>{try{let s=await l(g.value,o.emailcode,o.password);C.success("password update successful!"),setTimeout(()=>te("/login"),3e3)}catch(s){D(()=>{var c;(c=q.value)==null||c.reset()});let e=JSON.parse(s.message);C.error(e.enDesc||"failed, please try again")}};return(s,e)=>{const c=Y,y=se,J=ae,k=X,N=re,V=ee,W=oe;return $(),I("div",ve,[a("div",xe,[t(c,{to:"/"},{default:i(()=>e[5]||(e[5]=[a("img",{src:le,class:"h-10 mb-12"},null,-1)])),_:1,__:[5]}),e[11]||(e[11]=a("h2",{class:"text-2xl font-medium text-gray-900 text-title"},"Reset your password",-1)),h.value==1?($(),I("div",ge,[e[7]||(e[7]=a("div",{class:"mt-4 max-w-md text-title w-full text-base"},"Please enter your email and code",-1)),t(y,{ui:{base:"dark:!bg-white dark:!text-gray-900"},modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=m=>g.value=m),size:"xl",placeholder:"Your email address",class:"mt-1 w-full max-w-md"},null,8,["modelValue"]),a("div",_e,O(A.value),1),t(J,null,{default:i(()=>[t(p(fe),{ref_key:"turnstileRef",ref:q,modelValue:w.value,"onUpdate:modelValue":e[1]||(e[1]=m=>w.value=m),siteKey:"0x4AAAAAABCCDmTDhTUkRB29",onSuccess:M,class:"mt-3 mt-1 w-full max-w-md"},null,8,["modelValue"])]),_:1}),t(k,{onClick:z,class:"text-white w-full max-w-md mt-6 p-3 block text-center"},{default:i(()=>e[6]||(e[6]=[f(" Get email verification ")])),_:1,__:[6]})])):B("",!0),h.value==2?($(),I("div",he,[t(W,{state:p(o),validate:G,onSubmit:K,class:"w-full max-w-md"},{default:i(()=>[t(N,{name:"emailcode",required:"",class:"mb-4"},{default:i(()=>[t(y,{modelValue:p(o).emailcode,"onUpdate:modelValue":e[2]||(e[2]=m=>p(o).emailcode=m),size:"xl",placeholder:"verificaiton code",type:"text"},null,8,["modelValue"])]),_:1}),a("div",null,[e[8]||(e[8]=f("if you don’t receive the email ")),t(k,{variant:"ghost",class:"text-primary duration-200",label:"Get email verification",disabled:v.value>0,onClick:z},{default:i(()=>[f(O(v.value>0?`Resend in ${v.value}s`:"Get email verification"),1)]),_:1},8,["disabled"])]),t(N,{name:"password",required:"",class:"mb-4"},{default:i(()=>[t(y,{modelValue:p(o).password,"onUpdate:modelValue":[e[3]||(e[3]=m=>p(o).password=m),F],type:b.value?"text":"password",size:"xl",placeholder:"Password",ui:{icon:{trailing:{pointer:""}}}},{trailing:i(()=>[t(k,{onClick:E,variant:"ghost",class:"text-gray-500"},{default:i(()=>[t(V,{name:b.value?"i-heroicons-eye-slash":"i-heroicons-eye",class:"w-5 h-5"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type"])]),_:1}),t(N,{name:"repassword",required:"",class:"mb-4"},{default:i(()=>[t(y,{modelValue:p(o).repassword,"onUpdate:modelValue":[e[4]||(e[4]=m=>p(o).repassword=m),U],type:"password",size:"xl",placeholder:"Confirm password"},null,8,["modelValue"])]),_:1}),t(k,{type:"submit",class:"text-white w-full max-w-md mt-6 p-3 block text-center"},{default:i(()=>e[9]||(e[9]=[f("Reset password ")])),_:1,__:[9]})]),_:1},8,["state"])])):B("",!0),a("div",be,[t(c,{to:"/login",class:"block text-title hover:underline"},{default:i(()=>e[10]||(e[10]=[f("Return to Login")])),_:1,__:[10]})])]),a("div",ye,[e[15]||(e[15]=a("h1",{class:"text-4xl font-bold"},"Welcome Back to InCustom",-1)),e[16]||(e[16]=a("p",{class:"mt-2 text-lg"},"Access your store, orders, and designs instantly",-1)),e[17]||(e[17]=a("img",{src:ie,alt:"Custom Design",class:"mt-6 w-full max-w-xl shadow-lg rounded-lg"},null,-1)),a("ul",ke,[a("li",Ve,[t(V,{name:"i-material-symbols-check-circle-rounded",class:"text-2xl"}),e[12]||(e[12]=f(" Quick Access – Manage orders, track shipments & customize designs "))]),a("li",Ce,[t(V,{name:"i-material-symbols-check-circle-rounded",class:"text-2xl"}),e[13]||(e[13]=f(" Exclusive Deals – Special offers & discounts for members "))]),a("li",Te,[t(V,{name:"i-material-symbols-check-circle-rounded",class:"text-2xl"}),e[14]||(e[14]=f(" New Features – Try our latest design tools & products "))])])])])}}};export{Ue as default};
