import{d as H,u as J,r as y,c as b,a as K,w as X,o as Y,b as i,e as u,f as t,g as h,v as k,h as Z,F as V,i as $,n as A,j as p,k as C,l as S,t as a,m as tt,p as D,_ as et,q as st,s as L,x as ot}from"./kSsZQJMu.js";import{_ as lt}from"./BFM64Usq.js";import{c as nt,u as at}from"./qxOEfmD5.js";import{T as I}from"./BdhjvTua.js";const dt={class:"min-h-screen bg-[#F8F8F8]"},ct={class:"max-w-7xl mx-auto px-4 py-8"},rt={class:"rounded-lg shadow-sm"},it={class:"flex flex-col lg:flex-row gap-8 items-stretch"},ut={class:"flex-1"},pt={class:"w-full bg-white rounded"},ht={class:"shadow-sm"},xt={class:"p-6"},mt={class:"pb-4 text-left p-6 w-8"},yt={class:"max-h-[75vh] md:overflow-y-auto mt-4"},bt={class:"w-full bg-white rounded"},vt={class:"block"},_t={class:"py-4 p-6 w-8 bg-blue"},ft=["onUpdate:modelValue"],gt={class:"py-4 w-80"},wt={class:"flex items-center gap-4"},kt={class:"w-24 h-24 overflow-hidden rounded-lg"},Ct=["src","onClick"],St={class:"w-52"},Lt={class:"text-lg text-blackcolor truncate-1-lines max-w-52"},Qt={class:"text-sm text-[#8E8E8E] truncate-1-lines max-w-52 mt-1"},Ft={class:"py-4 pl-4 text-center p-6 text-gray-900"},Pt={class:"py-4 text-center w-28"},jt={class:"flex items-center border rounded-md w-24 justify-between px-2"},Et=["onClick","disabled"],Vt=["onUpdate:modelValue","onBlur"],$t=["onClick","disabled"],At={class:"py-4 pl-4 text-center p-6 text-gray-900"},Dt={class:"py-4 pl-4 text-center p-6"},It=["onClick"],Nt={key:0},Tt={colspan:"6",class:"text-center py-10 text-gray-400 p-6"},Bt={class:"bg-white rounded-lg flex flex-col items-center justify-center h-80 px-8"},Ut={class:"flex justify-between items-center my-6"},Mt={class:"w-full bg-white rounded"},Gt={class:"md:max-h-[480px] md:overflow-y-auto block"},Wt={class:"py-4 pl-6 p-6"},qt={class:"flex items-center gap-6"},zt={class:"w-24 h-24 overflow-hidden rounded relative cursor-pointer"},Ot=["src"],Rt={class:"font-medium text-lg"},Ht={class:"text-sm text-gray-500"},Jt={class:"mt-4 flex items-center gap-6 p-6 bg-white sticky bottom-0 shadow-md"},Kt={class:"text-gray-600"},Xt=["disabled"],Yt={class:"md:w-80 bg-white rounded-lg shadow-sm flex flex-col justify-between min-h-[200px]"},Zt={class:"p-6"},te={class:"flex justify-between text-gray-600"},ee={class:"flex justify-between mt-4 text-gray-600"},se={class:"pt-4 flex justify-between font-bold mt-4 text-gray-600"},v=1,_=999,oe=H({__name:"cart",setup(le){const{getCart:N,deleteCart:f}=nt(),g=J(),l=at();y("cart");const T=s=>{l.itemList[s].productQuantity<v&&(l.itemList[s].productQuantity=v),l.itemList[s].productQuantity>_&&(l.itemList[s].productQuantity=_)},n=y(!1),Q=y(0),x=b(()=>l.itemList.filter(s=>s.selected)),F=b(()=>x.value.reduce((s,e)=>s+e.product.skuSpec.customPrice*e.productQuantity,0)),P=b(()=>x.value.reduce((s,e)=>s+e.productQuantity,0)),m=y([]),w=async()=>{try{let s=await N(),e=s.result;l.updateCart(e),m.value=s.saleDownList,E()}catch{}},B=K("token");b(()=>!!B.value)&&w();const j=()=>{l.itemList.forEach(s=>{s.selected=n.value})},E=()=>{n.value=!n.value,l.itemList.forEach(s=>{s.selected=n.value})},U=()=>{if(n.value)g.push("/checkout?from=cart");else{const s=x.value.map(e=>e.id).join(",");g.push(`/checkout?from=cart&ids=${s}`)}},M=()=>{n.value=l.itemList.every(s=>s.selected)},G=(s,e,d)=>{g.push("/product/"+s+"/"+d+"?sku="+e)},W=async s=>{const e=l.itemList.indexOf(s);e>-1&&l.itemList.splice(e,1);let d={idList:[s.id]};await f(d),L.success("Delete successful")},q=async()=>{let s=l.itemList.filter(o=>o.selected);n.value=!1;let e=[];s.forEach(o=>{e.push(o.id)}),await f({idList:e}),L.success("Delete successful"),w()},z=async()=>{let s=[];m.value.forEach(d=>{s.push(d.id)}),await f({idList:s}),L.success("Delete successful"),w()},O=s=>{l.increaseQuantity(s)},R=s=>{l.decreaseQuantity(s)};return X(()=>l.itemList,(s,e)=>{s&&l.updateCart(l.itemList)}),Y(()=>{}),(s,e)=>{const d=et;return u(),i("div",dt,[t("div",ct,[e[18]||(e[18]=t("div",{class:"text-lg mb-6 font-bold dark:text-black"},"Shopping Cart",-1)),t("div",rt,[t("div",it,[t("div",ut,[t("table",pt,[t("thead",ht,[t("tr",xt,[t("th",mt,[h(t("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=o=>n.value=o),onChange:j,class:"rounded"},null,544),[[k,n.value]])]),e[3]||(e[3]=t("th",{class:"pb-4 text-left font-bold text-gray-600 p-6 w-80 bg-blue"},"Product ",-1)),e[4]||(e[4]=t("th",{class:"pb-4 text-center font-bold text-gray-600 p-6"},"Price($)",-1)),e[5]||(e[5]=t("th",{class:"pb-4 text-center font-bold text-gray-600 p-6 w-28"},"Qty",-1)),e[6]||(e[6]=t("th",{class:"pb-4 text-center font-bold text-gray-600 p-6"},"Subtotal($)",-1)),e[7]||(e[7]=t("th",{class:"pb-4 text-center font-bold text-gray-600 p-6"},"Action",-1))])])]),t("div",yt,[t("table",bt,[t("tbody",vt,[(u(!0),i(V,null,$(p(l).itemList,(o,r)=>(u(),i("tr",{key:o.id,class:A(["p-6 border-solid border-[#F8F8F8]",r!==p(l).itemList.length-1?"border-b":""])},[t("td",_t,[h(t("input",{type:"checkbox","onUpdate:modelValue":c=>o.selected=c,onChange:M,class:"rounded"},null,40,ft),[[k,o.selected]])]),t("td",gt,[t("div",wt,[t("div",kt,[t("img",{src:o.product.erpProduct.mainPic,onClick:c=>G(o.product.id,o.productSku,o.product.erpProduct.productEnglishName),alt:"Product image",class:"w-24 h-24 object-cover cursor-pointer"},null,8,Ct)]),t("div",St,[C(p(I),{color:"white",overlayInnerStyle:{color:"#333"},title:o.product.erpProduct.productEnglishName,overlayStyle:{maxWidth:"300px",whiteSpace:"pre-line",wordBreak:"break-word"}},{default:S(()=>[t("div",Lt,a(o.product.erpProduct.productEnglishName),1)]),_:2},1032,["title"]),C(p(I),{color:"white",overlayInnerStyle:{color:"#333"},title:o.product.skuSpec.specAttr,overlayStyle:{maxWidth:"300px",whiteSpace:"pre-line",wordBreak:"break-word"}},{default:S(()=>[t("div",Qt,a(o.product.skuSpec.specAttr),1)]),_:2},1032,["title"])])])]),t("td",Ft,a(o.product.skuSpec.customPrice.toFixed(2)),1),t("td",Pt,[t("div",jt,[t("button",{onClick:c=>R(r),class:"text-gray-500 hover:text-black disabled:text-gray-300",disabled:o.productQuantity<=v}," - ",8,Et),h(t("input",{"onUpdate:modelValue":c=>o.productQuantity=c,onBlur:c=>T(r),class:"w-12 h-8 text-center outline-none border-none focus:ring-0 focus:outline-none",min:v,max:_},null,40,Vt),[[tt,o.productQuantity,void 0,{number:!0}]]),t("button",{onClick:c=>O(r),class:"text-gray-500 hover:text-black disabled:text-gray-300",disabled:o.productQuantity>=_}," + ",8,$t)])]),t("td",At,a((o.product.skuSpec.customPrice*o.productQuantity).toFixed(2)),1),t("td",Dt,[t("img",{onClick:c=>W(o),src:lt,class:"w-6 cursor-pointer"},null,8,It)])],2))),128)),p(l).itemList.length===0?(u(),i("tr",Nt,[t("td",Tt,[t("div",Bt,[e[9]||(e[9]=t("p",{class:"text-black"},"There are no more items in your cart",-1)),C(d,{to:"/",class:"px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary-600 transition-colors mt-8"},{default:S(()=>e[8]||(e[8]=[D(" Go shopping ")])),_:1,__:[8]})])])])):Z("",!0)])]),h(t("div",Ut,[e[10]||(e[10]=t("div",null,"Discontinued product",-1)),t("div",null,[t("button",{class:"text-primary hover:text-primary-600 mr-4",onClick:z},"Delete All")])],512),[[st,m.value.length>0]]),t("table",Mt,[t("tbody",Gt,[(u(!0),i(V,null,$(m.value,(o,r)=>(u(),i("tr",{key:o.id,class:A(["p-6 border-solid border-[#F8F8F8]",r!==p(l).itemList.length-1?"border-b":""])},[t("td",Wt,[t("div",qt,[t("div",zt,[t("img",{src:o.product?o.product.erpProduct.mainPic:"",alt:"Product image",class:"w-full h-full object-cover"},null,8,Ot),e[11]||(e[11]=t("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center"},[t("span",{class:"text-white text-base"},"Invalid")],-1))]),t("div",null,[t("div",Rt,a(o.product?o.product.erpProduct.productEnglishName:""),1),t("p",Ht,a(o.product.skuSpec.specAttr),1)])])]),e[12]||(e[12]=t("td",{class:"py-4 pl-4 text-center p-6"},null,-1)),e[13]||(e[13]=t("td",{class:"py-4 pl-4 text-center p-6"},null,-1)),e[14]||(e[14]=t("td",{class:"py-4 pl-4 text-center p-6"},null,-1)),e[15]||(e[15]=t("td",{class:"py-4 pl-4 text-center p-6"},null,-1))],2))),128))])])]),t("div",Jt,[h(t("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=o=>n.value=o),onChange:j,class:"rounded"},null,544),[[k,n.value]]),t("span",Kt,[t("span",{class:"font-normal mr-2 cursor-pointer",onClick:E},"Select all"),D(" (select "+a(P.value)+" items)",1)]),t("button",{onClick:q,disabled:x.value.length===0,class:"text-primary hover:text-primary-600 disabled:text-gray-300 disabled:cursor-not-allowed"}," Delete ",8,Xt)])]),t("div",Yt,[t("div",Zt,[t("div",te,[t("span",null,"Selected "+a(P.value)+" items",1),t("span",null,"$"+a(F.value.toFixed(2)),1)]),t("div",ee,[e[16]||(e[16]=t("span",null,"Shipping",-1)),t("span",null,"$"+a(Q.value.toFixed(2)),1)]),t("div",se,[e[17]||(e[17]=t("span",null,"Total",-1)),t("span",null,"$"+a((F.value+Q.value).toFixed(2)),1)])]),t("button",{onClick:e[2]||(e[2]=o=>U()),class:"!rounded-button rounded w-full bg-primary text-white py-3 whitespace-nowrap sticky bottom-1"}," Checkout ")])])])])])}}}),ie=ot(oe,[["__scopeId","data-v-b86a09ee"]]);export{ie as default};
