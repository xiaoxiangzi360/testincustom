import{_ as A}from"./B0FICvjg.js";import{d as q,r as i,N as B,O as V,w as $,s as H,b as o,e as a,f as e,g as d,q as m,k as R,h as y,F as p,i as h,t as n,j as T,x as M}from"./kSsZQJMu.js";import{_ as D}from"./DyMHh6QV.js";import{P as F}from"./Dhub1vTp.js";import"./CC2CiqX2.js";const O={class:"bg-white"},U={class:"max-row py-6"},I={class:"container mx-auto px-6 mt-6"},K={class:"sticky [top:122px] bg-white z-10 flex justify-between items-center mb-8 py-4"},G={class:"relative flex items-center"},J={class:"relative min-h-[200px]"},Q={key:0,class:"absolute inset-0 bg-white/80 z-10 flex flex-col items-center justify-center space-y-4"},W={key:1,class:"grid grid-cols-4 gap-6 mb-12"},X={class:"grid grid-cols-4 gap-6 mb-12"},Y=["onClick"],Z={class:"aspect-square overflow-hidden rounded-t-lg"},ee=["src","alt"],te=["title"],se={class:"text-[#AEAEAE] mb-2 text-sm"},le={class:"flex justify-between items-center"},oe={class:"text-base font-semibold text-primary"},ae={class:"my-12"},re={class:"flex flex-col items-center text-center space-y-4 text-gray-200 text-sm"},ie={class:"mt-2"},ne={class:"flex justify-between items-center text-customblack text-xl mb-2"},ce={key:2,class:"grid grid-cols-5 gap-4 mb-12 mt-4"},ue={class:"grid grid-cols-5 gap-4 mb-12 mt-4"},de=["onClick"],me={class:"aspect-square overflow-hidden rounded-t-lg"},ge=["src","alt"],pe=["title"],he={class:"text-[#AEAEAE] mb-2 text-sm"},ve={class:"flex justify-between items-center"},_e={class:"text-base font-semibold text-primary"},fe=q({__name:"search",setup(ye){const b=["Best match","Price Low to High","Price High to Low"],x={"Best match":{value:"",sort:""},"Price Low to High":{value:"customPrice",sort:"asc"},"Price High to Low":{value:"customPrice",sort:"desc"}},g=i(!1),c=i(b[0]);i("");const u=i([]),r=i(!1),v=i([]),{getproductSearch:P,productSearchRecommendation:j}=F(),C=B(),S=V(),w=C.query.query,k=i(0);$(c,()=>{E()});const E=async()=>{r.value=!0;try{const l={keyword:w,pageNum:1,pageSize:12};c.value&&(l.sortKey=x[c.value].value,l.sortOrder=x[c.value].sort);const t=await P(l);u.value=t.result.list,t.result.list.length==0&&_()}catch(l){console.error("Load product list failed:",l),_()}finally{r.value=!1}},_=async()=>{g.value=!0;try{const l={lastPublishTime:k.value},t=await j(l);t.result.list.length>0?(v.value=t.result.list,k.value=t.result.list[t.result.list.length-1].publishTime):H.warning("No more Products")}catch(l){console.error("Load product list failed:",l)}finally{g.value=!1}};E();const N=(l,t)=>{S.push(`/product/${l}/${t}`)};return(l,t)=>{const L=A;return a(),o("div",O,[e("div",U,[e("div",I,[e("div",K,[t[2]||(t[2]=e("div",{class:"flex gap-6"},null,-1)),d(e("div",G,[t[1]||(t[1]=e("span",{class:"mr-4 text-sm"},"Sort",-1)),R(L,{size:"xs",modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=s=>c.value=s),options:b},null,8,["modelValue"])],512),[[m,u.value.length!=0]])]),e("div",J,[r.value?(a(),o("div",Q,t[3]||(t[3]=[e("svg",{class:"animate-spin h-6 w-6 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})],-1),e("div",{class:"text-gray-500 text-sm"},"Loading products...",-1)]))):y("",!0),r.value?(a(),o("div",W,[(a(),o(p,null,h(4,s=>e("div",{key:s,class:"bg-white rounded-lg shadow p-4"},t[4]||(t[4]=[e("div",{class:"h-48 bg-gray-200 rounded w-full mb-4 animate-pulse"},null,-1),e("div",{class:"h-4 bg-gray-200 rounded w-3/4 mb-2 animate-pulse"},null,-1),e("div",{class:"h-3 bg-gray-200 rounded w-1/2 animate-pulse"},null,-1)]))),64))])):y("",!0),d(e("div",X,[(a(!0),o(p,null,h(u.value,(s,f)=>(a(),o("div",{onClick:z=>N(s.id,s.productEnglishName),key:f,class:"bg-white rounded-lg cursor-pointer group"},[e("div",Z,[e("img",{src:s.productMainPic??"/images/empty.jpg",alt:s.productEnglishName,class:"w-full h-full object-cover object-center transition-transform duration-300 group-hover:scale-105",style:{"aspect-ratio":"1 / 1"}},null,8,ee)]),e("div",null,[e("h3",{class:"text-sm font-normal mb-2 text-customblack mt-3 line-clamp-2 cursor-default",title:s.productEnglishName},n(s.productEnglishName),9,te),e("p",se,n(s.size),1),e("div",le,[e("span",oe," $"+n(s.customPriceStr),1)])])],8,Y))),128))],512),[[m,u.value.length>0&&!r.value]]),d(e("div",ae,[e("div",re,[t[7]||(t[7]=e("img",{src:D,alt:"Empty",class:"w-32 h-32"},null,-1)),e("div",null,[e("div",ie,"No results for “"+n(T(w))+"”",1),t[5]||(t[5]=e("div",{class:"mt-2"},"Try checking your spelling or use more general terms",-1)),t[6]||(t[6]=e("div",{class:"mt-2"},"Check each product page for other buying options.",-1))])])],512),[[m,u.value.length===0&&!r.value]]),d(e("div",ne,[t[8]||(t[8]=e("span",null,"New Product",-1)),e("button",{class:"text-sm text-gray-500 hover:text-primary hover:underline",onClick:_}," Refresh the items ")],512),[[m,u.value.length===0&&!r.value]]),g.value?(a(),o("div",ce,[(a(),o(p,null,h(5,s=>e("div",{key:s,class:"bg-white rounded-lg shadow"},t[9]||(t[9]=[e("div",{class:"aspect-square bg-gray-200 rounded w-full mb-4 animate-pulse h-44"},null,-1),e("div",{class:"h-8 bg-gray-200 rounded w-full mb-2 animate-pulse"},null,-1),e("div",{class:"h-4 bg-gray-200 rounded w-1/2 animate-pulse"},null,-1)]))),64))])):y("",!0),d(e("div",ue,[(a(!0),o(p,null,h(v.value,(s,f)=>(a(),o("div",{onClick:z=>N(s.id,s.productEnglishName),key:f,class:"bg-white rounded-lg cursor-pointer group"},[e("div",me,[e("img",{src:s.productMainPic??"/images/empty.jpg",alt:s.productEnglishName,class:"w-full h-full object-cover object-center transition-transform duration-300 group-hover:scale-105",style:{"aspect-ratio":"1 / 1"}},null,8,ge)]),e("div",null,[e("h3",{class:"text-sm mb-2 font-normal text-customblack mt-3 line-clamp-2 cursor-default",title:s.productEnglishName},n(s.productEnglishName),9,pe),e("p",he,n(s.size),1),e("div",ve,[e("span",_e," $"+n(s.customPriceStr),1)])])],8,de))),128))],512),[[m,v.value.length>0&&!g.value]])])])])])}}}),Ne=M(fe,[["__scopeId","data-v-aa59bea3"]]);export{Ne as default};
