import{d as C,z as w,e as o,l as _,b as c,h as g,k as p,t as d,f as n,_ as S,bh as F,N as I,bg as O,bi as U,bj as V,c as A,F as y,i as x,I as E,j as v,Y as L}from"./kSsZQJMu.js";import{_ as D}from"./GXEHM_6H.js";import{_ as H}from"./-Md5KaRV.js";import{_ as M}from"./DmbfeGMs.js";import{u as Q}from"./DqtIXFPk.js";import{u as R}from"./CFZoJUTL.js";import"./Bn4OmBq9.js";import"./DeMrI2nt.js";import"./DLmCINPn.js";const Y={key:0,class:"absolute bg-primary font-serif p-1 right-0 rounded-bl-md rounded-br-none rounded-tl-none rounded-tr-md text-white text-xs z-10"},q={class:"flex justify-center"},G={class:"-m-4 bg-white h-64 p-6 rounded-lg"},J={class:"flex font-medium items-center justify-between mt-4"},K={class:"font-bold"},T={key:0,class:"dark:text-primary-400 text-primary-500 text-xs"},W=C({__name:"ProductCard",props:{id:{},title:{},price:{},description:{},category:{},image:{},imageOptimized:{},rating:{},badge:{},shipping:{}},setup(u){return(e,m)=>{const a=D,l=H,t=S;return o(),w(t,{class:"m-4 relative w-full md:w-1/3 lg:w-1/4 xl:w-1/5",to:`/store/${e.id}`},{default:_(()=>[e.badge?(o(),c("span",Y,d(e.badge),1)):g("",!0),p(l,{class:"md:h-full"},{header:_(()=>[n("div",q,[n("div",G,[p(a,{class:"max-h-full",src:e.image,height:"250"},null,8,["src"])])])]),default:_(()=>[n("div",null,[n("span",null,d(e.title),1),n("div",J,[n("span",K,"$"+d(e.price),1),e.shipping?(o(),c("span",T,d(e.shipping),1)):g("",!0)])])]),_:1})]),_:1},8,["to"])}}}),X=Object.assign(W,{__name:"ProductCard"}),Z=async()=>{const{data:u,error:e}=await Q("/api/store/local-data","$-timAccQ-I");if(e.value)throw F({...e.value,statusMessage:"Couldn't fetch products."});return{...u,fetchCategory:a=>{const{optimizeImage:l}=R();return u.value.products.filter(t=>!a||t.category===a).map(t=>t.image?{...t,imageOptimized:l(t.image)}:t)}}},ee={class:"pb-16"},te={key:0,class:"flex items-center justify-center m-4"},se={class:"ml-4 space-y-2"},ne={"data-pg-name":"Products",class:"flex flex-wrap justify-center"},pe=C({__name:"categorybak",async setup(u){let e,m;const a=I(),l=s=>s&&s[0].toUpperCase()+s.slice(1)||"";O({title:()=>l(a.params.category)});const{category:t}=a.params,{fetchCategory:k}=([e,m]=U(()=>Z()),e=await e,m(),e),f=k(t==null?void 0:t.toString()),h=[...new Set(f.filter(s=>s.badge).map(s=>s.badge))],r=V((t==null?void 0:t.toString())||"all",()=>new Set),$=s=>{r.value.has(s)?r.value.delete(s):r.value.add(s)},z=A(()=>r.value.size?f.filter(s=>r.value.has(s.badge)):f);return(s,b)=>{const j=E,B=X,P=M;return o(),c("div",ee,[p(P,{class:"py-8"},{default:_(()=>[h.length?(o(),c("section",te,[b[0]||(b[0]=n("span",{class:"font-bold text-sm"},"Filter Badges",-1)),n("div",se,[(o(),c(y,null,x(h,(i,N)=>p(j,{key:N,label:i,variant:v(r).has(i)?"soft":"outline",class:"mr-2",onClick:oe=>$(i)},null,8,["label","variant","onClick"])),64))])])):g("",!0),n("section",ne,[(o(!0),c(y,null,x(v(z),i=>(o(),w(B,L({key:i.id},{ref_for:!0},i),null,16))),128))])]),_:1})])}}});export{pe as default};
