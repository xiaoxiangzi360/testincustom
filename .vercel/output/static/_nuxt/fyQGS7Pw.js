import{C as l,a as u,M as d}from"./kSsZQJMu.js";const v=()=>{const{$api:t}=l(),a=u("token",{maxAge:60*60*24*7,sameSite:"lax"}),c=u("userinfo",{maxAge:60*60*24*7,sameSite:"lax"});return{login:async(o,r)=>{try{const e=await t("/user/user/loginByEmail",{method:"POST",body:{email:o,password:r}});return e.code==0&&(a.value=e.result.token,c.value=JSON.stringify(e.result.user)),e}catch(e){throw console.error("登录失败:",e),e}},logout:()=>{a.value=null,d("/login")},register:async(o,r,e,n,i)=>{try{const s=await t("/user/user/createWithLogin",{method:"POST",body:{fullName:o,email:r,password:e,numberAreaCode:n,number:i}});return s.code==0&&(a.value=s.result.token,c.value=JSON.stringify(s.result.user)),s}catch(s){throw console.error("登录失败:",s),s}},sendrepassword:async(o,r)=>{try{return await t("/user/user/sendRetrievePasswordEmail",{method:"POST",body:{email:o,token:r}})}catch(e){throw console.error("发送失败:",e),e}},updatepassword:async(o,r,e)=>{try{return await t("/user/user/retrievePassword",{method:"POST",body:{email:o,code:r,newPassword:e}})}catch(n){throw console.error("修改失败:",n),n}},token:a,createContactUs:async o=>{try{return await t("/user/contactUs/createContactUs",{method:"POST",body:o})}catch(r){throw r}}}};export{v as u};
